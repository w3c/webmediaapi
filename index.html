<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Web Media API Snapshot 2021</title>
    <script
     src="https://www.w3.org/Tools/respec/respec-w3c"
     class="remove">
    </script>
    <script class="remove">
      var respecConfig = {
        specStatus: "CG-DRAFT",
        editors: [{
          name: "Jon Piesing",
          company: "TP Vision Belgium N.V.",
          companyURL: "https://www.tpvision.com/"
        }, {
          name: "John Riviello",
          company: "Comcast",
          companyURL: "http://comcastcorporation.com",
          w3cid: 70923
        }],
        formerEditors: [{
          name: "David Evans",
          company: "British Broadcasting Corporation",
          companyURL: "https://www.bbc.co.uk/rd"
        }, {
          name: "John Luther",
          company: "JW Player",
          companyURL: "https://www.jwplayer.com",
          w3cid: 71784
        }, {
          name: "Mark Vickers",
          company: "Comcast",
          companyURL: "http://comcastcorporation.com",
          w3cid: 46825
        }],
        github: "https://github.com/w3c/webmediaapi",
        shortName: "WMAS2021",
        group: "webmediaapi",
        testSuiteURI: "https://webapitests2020.ctawave.org/wave/",
        copyrightStart: 2016,
        additionalCopyrightHolders: "Consumer Technology Association",
        logos: [{
          src: 'https://www.w3.org/StyleSheets/TR/2016/logos/W3C',
          href: "https://www.w3.org",
          alt: "World Wide Web Consortium (W3C)",
          width: 72,
          height: 48,
          id: 'w3c-logo',
        }, {
          src: 'https://cdn.cta.tech/cta/media/media/home/cta-logo.png',
          href: "https://cta.tech/Research-Standards.aspx",
          alt: "Consumer Technology Association (CTA)",
          width: 100,
          height: 65,
          id: 'cta-logo',
        }],
        localBiblio: {
          "DOM": {
            title: "DOM Standard",
            authors: [
              "Anne van Kesteren"
            ],
            href: "https://dom.spec.whatwg.org/review-drafts/2019-06/",
            date: "18 June 2019",
            status: "Review Draft (use this version or later)",
            publisher: "WHATWG"
          },
          "FETCH": {
            title: "Fetch Standard",
            authors: [
              "Anne van Kesteren"
            ],
            href: "https://fetch.spec.whatwg.org/review-drafts/2019-12/",
            date: "13 December 2019",
            status: "Review Draft (use this version or later)",
            publisher: "WHATWG"
          },
          "FULLSCREEN": {
            title: "Fullscreen API Standard",
            authors: [
              "Philip Jägenstedt"
            ],
            href: "https://fullscreen.spec.whatwg.org/review-drafts/2020-01/",
            date: "29 January 2020",
            status: "Review Draft (use this version or later)",
            publisher: "WHATWG"
          },
          "HTML": {
            title: "HTML Standard",
            authors: [
              "Anne van Kesteren",
              "Domenic Denicola",
              "Ian Hickson",
              "Philip Jägenstedt",
              "Simon Pieters"
            ],
            href: "https://html.spec.whatwg.org/review-drafts/2020-01/",
            date: "29 January 2020",
            status: "Review Draft (use this version or later)",
            publisher: "WHATWG"
          },
          "NOTIFICATIONS": {
            title: "Notifications API Standard",
            authors: [
              "Anne van Kesteren"
            ],
            href: "https://notifications.spec.whatwg.org/review-drafts/2020-01/",
            date: "29 January 2020",
            status: "Review Draft (use this version or later)",
            publisher: "WHATWG"
          },
          "XHR": {
            title: "XMLHttpRequest Standard",
            authors: [
              "Anne van Kesteren"
            ],
            href: "https://xhr.spec.whatwg.org/review-drafts/2020-02/",
            date: "17 February 2020",
            status: "Review Draft (use this version or later)",
            publisher: "WHATWG"
          }
        }
      };
    </script>
    <style>
      .head > a.logo {
        float: right;
        margin: 0.4rem 0 0.2rem .4rem;
      }
      .head > a.logo {
        border: none;
        text-decoration: none;
        background: transparent;
      }
      </style>
  </head>
  <body>
    <section id="abstract">
      <p>This specification lists the web APIs to support media web apps that are supported across all four of the most widely used user agent code bases at the time of publication. This specification should be updated at least annually to keep pace with the evolving web platform. We encourage manufacturers to develop products that support the APIs in the most recent version of Web Media API Snapshot. This specification is comprised of references to existing specifications in W3C and other specification groups. The target devices will include any device that runs a modern HTML user agent, including televisions, game machines, set-top boxes, mobile devices and personal computers.</p>
      <p>This specification is being developed as part of the <a href="http://cta.tech/WAVE"><abbr title="Consumer Technology Association">CTA</abbr> <abbr title="Web Application Video Ecosystem">WAVE</abbr> Project</a>.</p>
    </section>
    <section id="sotd">
    </section>
    <section class="informative">
      <h2>Introduction</h2>
      <p>Writing portable media web apps across browsers on consumer products (e.g. smart TVs, game machines, set-top boxes) is much more difficult than writing portable media web apps across personal computer browsers. Two main reasons for this are that the browsers on consumer products are often quite out-of-date and that they often have integration issues.</p>
    <section>
      <h3>Out-of-date browsers</h3>
      <p>While browsers integrated into consumer products are often built from the same major HTML user agent code bases as personal computer browsers, it is not unusual for a consumer product to be using a code base release that is three or more years old, while personal computer browsers use recent code base releases. Furthermore, browsers on consumer products are often infrequently updated, if ever. This results in very different web API support across devices.</p>
      <p>This specification is intended to address this problem by listing key specifications used by media web apps that are all supported in common by all of the four major web user agent code bases at the time of publication. The specification will then be used to generate a test suite. The versions of each of the four code bases used to generate the test suite are listed on the front page of the test suite. (See Test suite URL above.)</p>
      <p>The specification and test suite enable device manufacturers to specify and verify that their browsers are up-to-date with current web standards at the time of product release. The specification and tests can also be used to specify and verify updates to browsers in the field.</p>
      <p>Note that this specification is not defining a subset or profile to be used in place of the full web platform. There are additional specifications that are included in all code bases that are not included in this specification. Furthermore, individual code bases include APIs that are not supported on all other code bases, but are nonetheless widely used. Therefore, this specification and associated tests should only be used as verification of a minimum set of current APIs. There is no suggestion that APIs not included in this specification should be removed from implementations.</p>
      <p>It is intended that this specification be updated periodically to reflect adoption of new specifications in the web platform. For example, the specification might be updated once a year for media devices being introduced onto the market in the following year.</p>
    </section>
    <section>
      <h3>Integration issues</h3>
      <p>There are many issues during integration of a web user agent with a hardware device that can affect the operation of web APIs. For example, if insufficient memory is allocated for cookies, they won’t function as intended.</p>
      <p>To address this issue, this specification includes a list of target values for several APIs which are known to have been impacted by integration issues. There will also be a test suite to verify these values are supported on a device. It is expected that additional integration requirements will be added in future updates.</p>
      <p>Note that these values are not mandated by any web standards, but are based on measurement of values supported by popular browsers. Supporting these values should provide better interoperability of web applications with personal computer and mobile browsers. Manufacturers may choose to exceed these values based on their expected application environments.</p>
    </section>
  </section>
    <section id="conformance">
    </section>
    <section>
      <h2>Web Media APIs currently supported on all platforms</h2>
      <section class="informative">
        <h2>Introduction</h2>
        <p>This section lists the web APIs to support media web apps that are supported across all four of the most widely used user agent code bases at the time of publication. We encourage manufacturers to develop products that support the APIs in the most recent version of this specification.</p>
        <p>The approach taken in this draft is only to include specifications that are of particular significance to authors, but not include all the specifications cited by those included specifications. For example, HTTP is required by the HTML spec and is therefore not included here.</p>
        <p>In addition, the specifications of the web APIs mentioned here may in turn (recursively) reference other specifications that are not supported across all four of the most widely used user agent code bases. This possibility is understood and accepted. For example, Service Workers 1 [[SERVICE-WORKERS-1]] references the <code>push</code> event from the Push API [[PUSH-API]], but the Push API is not yet widely supported. These unsupported referenced specifications are not explicitly cited as exceptions in this specification but, in spite of this, will not be tested as part of our tests.</p>
        <section>
          <h3>Features with limited implementation</h3>
          <p>Parts of some web specifications are not currently implemented across all user agent code bases and may never be. Consequently, these features will not be included in our tests. Any such features are noted as exceptions under that API.</p>
        </section>
        <section>
          <h3>At-risk features</h3>
          <p>Some specifications referenced in this section may not have reached Recommendation and, as such, may contain 'at-risk' features. Since the most common reason for features being marked as at-risk is lack of implementations, such features may not be present in some implementations of this specification and will not be tested as part of our tests.</p>
        </section>
        <section>
          <h3>Hardware Limitations</h3>
          <p>While this specification does not specify a minimum or maximum number of media elements that can play content simultaneously, developers should note that due to hardware limitations of available decoders, the simultaneous playback of multiple media elements in a web application may not be possible.</p>
        </section>
      </section>
      <section>
        <h3>Client code updates</h3>
        <p>The W3C Technical Architecture Group released a finding called <i>The evergreen Web</i> which strongly recommends that "Browsers must be regularly updated, especially to fix security and interoperability bugs — ideally with an automatic, secure update mechanism." [[?EVERGREEN-WEB]]</p>
        <p>Devices SHOULD regularly update their browsers, preferably automatically.</p>
      </section>
      <section>
        <h3>Core web specifications</h3>
        <p>Devices MUST be conforming implementations of the following specifications:</p>
        <ul>
          <li>DOM [[!DOM]]</li>
          <li>ECMAScript 2021 Language Specification [[!ECMASCRIPT-2021]]
            <ul>
              <li>Exceptions:
                <ul>
                  <li><a href="https://262.ecma-international.org/12.0/#sec-sharedarraybuffer-objects"><code>SharedArrayBuffer</code></a> is not yet widely supported in an effort to mitigate the <a href="https://webkit.org/blog/8048/what-spectre-and-meltdown-mean-for-webkit/">Spectre attack</a>.</li>
                  <li><a href="https://262.ecma-international.org/12.0/#sec-atomics-object"><code>Atomics</code></a> are not yet widely supported.</li>
                  <li><a href="https://262.ecma-international.org/12.0/#prod-Assertion">look-behind assertions</a> are not yet widely supported.</li>
                  <li>The <a href="https://262.ecma-international.org/12.0/#sec-function.prototype.tostring"><code>Function.prototype.toString</code> revisions from ECMAScript 2019</a> are not yet widely supported.</li>
                  <li>The <a href="https://262.ecma-international.org/12.0/#sec-typedarray-objects"><code>BigInt64Array</code></a>, <a href="https://262.ecma-international.org/12.0/#sec-typedarray-objects"><code>BigUint64Array</code></a>, <a href="https://262.ecma-international.org/12.0/#sec-dataview.prototype.getbigint64"><code>DataView.prototype.getBigInt64</code></a>, and <a href="https://262.ecma-international.org/12.0/#sec-dataview.prototype.getbiguint64"><code>DataView.prototype.getBigUint64</code></a> features of <a href="https://262.ecma-international.org/12.0/#sec-terms-and-definitions-bigint-value"><code>BigInt</code></a> are not yet widely supported.</li>
               </ul>
            </ul>
          </li>
          <li>HTML [[!HTML]]
            <ul>
              <li>Devices MUST support the conformance class <b><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#interactive">Web browsers and other interactive user agents</a></b>.</li>
              <li>Devices MUST support a mechanism to construct instances of <a href="https://html.spec.whatwg.org/multipage/media.html#text-track-cue">TextTrackCue</a> or an interface that inherits from it.
                <ul>
                  <li>Note: Current user agent implementations meet this requirement either by supporting <a href="https://w3c.github.io/webvtt/#vttcue">VTTCue</a> or by supporting a constructor for <a href="https://html.spec.whatwg.org/multipage/media.html#text-track-cue">TextTrackCue</a> that is no longer included in the HTML specification [[!HTML]].</li>
                </ul>
              </li>
              <li>Exception: <a href="https://html.spec.whatwg.org/multipage/workers.html#shared-workers-and-the-sharedworker-interface"><code>SharedWorker</code></a> is not yet widely supported.</li>
            </ul>
          </li>
        </ul>
      </section>
      <section>
        <h3>CSS specifications</h3>
        <p>Devices MUST be conforming implementations of the following specifications (CSS Snapshot 2018 [[?CSS-2018]]):</p>
        <p class="note" role="note">As part of the updates included in CSS Snapshot 2018, the <a href="https://www.w3.org/TR/css-2018/#profiles">CSS Profiles</a> effort was discontinued.</p>
        <ul>
          <li>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification [[!CSS2]]</li>
          <li>Compositing and Blending Level 1 [[!COMPOSITING]]</li>
          <li>CSS Animations [[!CSS3-ANIMATIONS]]</li>
          <li>CSS Backgrounds and Borders Module Level 3 [[!CSS3-BACKGROUND]]</li>
          <li>CSS Basic User Interface Module Level 3 (CSS3 UI) [[!CSS-UI-3]]</li>
          <li>CSS Cascading and Inheritance Level 3 [[!CSS-CASCADE-3]]</li>
          <li>CSS Color Module Level 3 [[!CSS3-COLOR]]</li>
          <li>CSS Conditional Rules Module Level 3 [[!CSS3-CONDITIONAL]]</li>
          <li>CSS Custom Properties For Cascading Variables Module Level 1 [[!CSS-VARIABLES-1]]</li>
          <li>CSS Easing Functions Level 1 [[!CSS-EASING-1]]
            <ul>
              <li>Exception: <a href="https://www.w3.org/TR/css-easing-1/#funcdef-step-easing-function-steps"><code>jump-</code> keywords for <code>steps()</code></a> are not yet widely supported.</li>
            </ul>
          </li>
          <li>CSS Flexible Box Layout Module Level 1 [[!CSS-FLEXBOX-1]]</li>
          <li>CSS Fonts Module Level 3 [[!CSS-FONTS-3]]</li>
          <li>CSS Grid Layout Module Level 1 [[!CSS-GRID-1]]</li>
          <li>CSS Image Values and Replaced Content Module Level 3 [[!CSS3-IMAGES]]</li>
          <li>CSS Multi-column Layout Module [[!CSS3-MULTICOL]]</li>
          <li>CSS Namespaces Module Level 3 [[!CSS-NAMESPACES-3]]</li>
          <li>CSS Scroll Snap Module Level 1 [[!CSS-SCROLL-SNAP-1]]</li>
          <li>CSS Shapes Module Level 1 [[!CSS-SHAPES-1]]</li>
          <li>CSS Style Attributes [[!CSS-STYLE-ATTR]]</li>
          <li>CSS Syntax Module Level 3 [[!CSS-SYNTAX-3]]</li>
          <li>CSS Text Decoration Module Level 3 [[!CSS-TEXT-DECOR-3]]
            <ul>
              <li>Exception: <a href="https://www.w3.org/TR/css-text-decor-3/#emphasis-marks"><code>emphasis marks</code></a> properties are not yet widely supported.</li>
            </ul>
          </li>
          <li>CSS Transforms Module Level 1 [[!CSS-TRANSFORMS-1]]</li>
          <li>CSS Transitions [[!CSS3-TRANSITIONS]]</li>
          <li>CSS Values and Units Module Level 3 [[!CSS-VALUES]]</li>
          <li>CSS Will Change Module Level 1 [[CSS-WILL-CHANGE-1]]</li>
          <li>CSS Writing Modes Level 3 [[!CSS-WRITING-MODES-3]]
            <ul>
              <li>Exception: <a href="https://www.w3.org/TR/css-writing-modes-3/#text-orientation"><code>text-orientation</code></a> property is not yet widely supported.</li>
            </ul>
          </li>
          <li>CSSOM View Module [[!CSSOM-VIEW]]</li>
          <li>Filter Effects Module Level 1 [[!FILTER-EFFECTS-1]]</li>
          <li>Media Queries [[!CSS3-MEDIAQUERIES]]</li>
          <li>Selectors Level 3 [[!SELECT]]</li>
        </ul>
      </section>
      <section>
        <h3>Media specifications</h3>
        <p>Devices MUST be conforming implementations of the following specifications:</p>
        <ul>
          <li>Encrypted Media Extensions [[!ENCRYPTED-MEDIA]]</li>
          <li>Media Capabilities [[!MEDIA-CAPABILITIES]]</li>
          <li>Media Source Extensions [[!MEDIA-SOURCE]]</li>
          <li>Web Audio API [[!WEBAUDIO]]
            <ul>
              <li>Exceptions: Since not all environments currently support Media Streams [[MEDIACAPTURE-STREAMS]], <a href="https://www.w3.org/TR/webaudio/#mediastreamaudiosourcenode"><code>MediaStreamAudioSourceNode</code></a> and <a href="https://www.w3.org/TR/webaudio/#mediastreamaudiodestinationnode"><code>MediaStreamAudioDestinationNode</code></a> are not yet widely supported.</li>
            </ul>
          </li>
        </ul>
      </section>
      <section>
        <h3>Graphics specifications</h3>
        <p>Devices MUST be conforming implementations of the following specifications:</p>
        <ul>
          <li>Fullscreen API Standard [[!FULLSCREEN]]</li>
          <li>Graphics Interchange Format [[!GIF]]</li>
          <li>HTML Canvas 2D Context [[!2DCONTEXT]]</li>
          <li>JPEG File Interchange Format [[!JPEG]]</li>
          <li>Portable Network Graphics (PNG) Specification (Second Edition) [[!PNG]]</li>
          <li>WebGL Specification [[!WEBGL-103]]</li>
        </ul>
      </section>
      <section>
        <h3>Font specifications</h3>
        <p>Devices MUST be conforming implementations of the following specifications:</p>
        <ul>
          <li>Open Font Format [[!OPEN-FONT-FORMAT]]</li>
          <li>WOFF File Format 1.0 [[!WOFF]]</li>
        </ul>
      </section>
      <section>
        <h3>Networking specifications</h3>
        <p>Devices MUST be conforming implementations of the following specifications:</p>
        <ul>
          <li>Fetch [[!FETCH]]</li>
          <li>XMLHttpRequest [[!XHR]]</li>
          <li>Note: Web sockets is also required as part of the HTML specification [[!HTML]].</li>
        </ul>
      </section>
      <section>
        <h3>Security specifications</h3>
        <p>Devices MUST be conforming implementations of the following specifications:</p>
        <ul>
          <li>Content Security Policy Level 2 [[!CSP2]]</li>
          <li>Referrer Policy [[!REFERRER-POLICY]]</li>
          <li>Subresource Integrity [[!SRI]]</li>
          <li>Transport Layer Security (TLS) Protocol Version 1.2 [[!RFC5246]]</li>
          <li>Transport Layer Security (TLS) Protocol Version 1.3 [[!RFC8446]]</li>
          <li>Upgrade Insecure Requests [[!UPGRADE-INSECURE-REQUESTS]]</li>
          <li>Web Cryptography API [[!WEBCRYPTOAPI]]</li>
        </ul>
        <p>Note: Along with these security standards for the user agent, all IoT devices should be designed with security in mind. An industry-developed voluntary consensus standard for a minimum security "baseline" for IoT devices can be found at <a href="https://shop.cta.tech/collections/standards/cybersecurity">https://shop.cta.tech/collections/standards/cybersecurity</a>.</p>
      </section>
      <section>
        <h3>Web Performance specifications</h3>
        <p>Devices MUST be conforming implementations of the following specifications:</p>
        <ul>
          <li>Beacon [[!BEACON]]</li>
          <li>High Resolution Time Level 1 [[!HR-TIME-1]]</li>
          <li>Navigation Timing [[!NAVIGATION-TIMING]]</li>
          <li>Page Visibility Level 2 [[!PAGE-VISIBILITY-2]]</li>
          <li>Performance Timeline [[!PERFORMANCE-TIMELINE]]</li>
          <li>Resource Timing Level 1 [[!RESOURCE-TIMING-1]]</li>
          <li>User Timing Level 2 [[!USER-TIMING-2]]</li>
        </ul>
      </section>
      <section>
        <h3>Other web specifications</h3>
        <p>Devices MUST be conforming implementations of the following specifications:</p>
        <ul>
          <li>Indexed Database API [[!INDEXEDDB]]</li>
          <li>File API [[!FILEAPI]]</li>
          <li>Notifications API [[!NOTIFICATIONS]]
            <ul><li>Exception: it is possible for the user agent to support the Notifications API, but the operating system and/or device platform does not support a system to display notifications. In this scenario, it is critical that the current recommendations for feature detection of the Notifications API do not cause an error when run on the device.
              <ul><li>Note: best practices regarding feature detection of Notifications API capabilities are discussed in <a href="https://github.com/whatwg/notifications/issues/116">Notifications API GitHub Issue #116</a> and the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API/Using_the_Notifications_API">"Using the Notifications API" guide from MDN</a>.</li></ul>
            </li></ul>
          </li>
          <li>Service Workers 1 [[!SERVICE-WORKERS-1]]</li>
          <li>UI Events [[!UIEVENTS]]</li>
          <li>Note: Cross-document messaging, Channel messaging, Web storage and Web workers are also required as part of the HTML specification [[!HTML]].</li>
        </ul>
      </section>
    </section>
    <section>
      <h2>User Agent Integration Specifications</h2>
      <section class="informative">
        <h2>Introduction</h2>
        <p>This section contains values for integrating a web user agent with a consumer device. The values are based on de facto requirements from browsers on personal computers and mobile devices. Supporting these integration specifications will increase interoperability with media web apps on other devices.</p>
        <p>A test suite will evaluate client support for these specifications.</p>
      </section>
      <section>
        <h3>Cookies</h3>
        <ul>
          <li>Devices MUST support cookies of length at least 4096 bytes.</li>
          <li>Devices MUST support at least 20 cookies per domain.</li>
          <li>Devices MUST support at least 100 total cookies.</li>
          <li>Devices MUST support persistence of cookies between application sessions.</li>
          <li>Devices MUST support persistence of cookies across power cycles of the device.</li>
        </ul>
      </section>
      <section>
        <h3>URLs</h3>
        <ul>
          <li>Devices MUST support URLs up to a length of 2047 bytes.</li>
        </ul>
      </section>
    </section>
    <section class="informative">
      <h2>Web Media APIs proposed to be supported on all platforms</h2>
      <section>
        <h2>Introduction</h2>
        <p>APIs in this section are important for web media delivery, but are not yet implemented in all four code bases. We encourage the following APIs be implemented on all HTML user agents as soon as possible. It is expected that, as implementations become available, some of these specifications may be listed as supported on all platforms in a future version of this specification.</p>
      </section>
      <section>
        <h3>Media specifications</h3>
        <ul>
          <li>Media Fragments URI 1.0 (basic) [[MEDIA-FRAGS]]</li>
          <li>Media Session Standard [[MEDIASESSION]]</li>
          <li>Sourcing In-band Media Resource Tracks from Media Containers into HTML [[INBANDTRACKS]]</li>
        </ul>
      </section>
      <section>
        <h3>Other web specifications</h3>
        <ul>
          <li>Web App Manifest [[APPMANIFEST]]</li>
        </ul>
      </section>
    </section>
    <section id="references">
      <p>For WHATWG living standards, while it is recommended that devices support the living standard, they must support the referenced review draft version of each WHATWG standard or a later commit snapshot version.</p>
    </section>
  </body>
</html>
